#include <std.h>
inherit POTION;
int ok,size;

void create() {
    ::create() ;
    set_short("A vial containing a dull yellow potion") ;
    set_long("The dull yellow potion swirls in the crystal vial.\n") ;
    set ("color", "dull yellow") ;
    set ("effect_time", (7+random(4))*10) ;
}

int do_effect() {
    object *weaps,*arms;
    int i;
    if(drinker->query_size() < 3){
    	tell_object(drinker,"Suddenly, you begin to feel larger.\n") ;
    	drinker->set_size((int)drinker->query_size() + 1);
        arms = drinker->all_armour();
        weaps = drinker->query_wielded();
        for(i=0;i<sizeof(arms);i++){
            if(!arms[i]->is_cursed()) arms[i]->unequip();
        }
        for(i=0;i<sizeof(weaps);i++){
            if(!weaps[i]->is_cursed()) weaps[i]->unequip();
        }
	ok = 1;
    } else {
    	tell_object(drinker,"You feel no different then before.\n") ;
	ok = 0;
    }
    return 1 ;
}

int do_wear_off() {
	if(ok){
    		drinker->set_size(size);
                drinker->force_me("drop all");
    		tell_object(drinker,"Suddenly, you begin to feel normal sized.\n") ;
                tell_object(drinker,"You dropped everything as your body shrinkes!");
	}
    return 1 ;
}
