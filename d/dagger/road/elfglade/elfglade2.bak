//little side path, elven ritual plot & permanent addition to retain lore. N, 3/15.
#include <std.h>
inherit ROOM;

void create() {
    ::create();
    set_terrain(LIGHT_FOREST);
    set_travel(DIRT_ROAD);
    set_property("indoors",0);
    set_property("light",2);
    set_name("A Wall Of Branches");
    set_short("%^RESET%^%^GREEN%^A Wall Of Branches%^RESET%^");
    set_long("%^GREEN%^The %^ORANGE%^branches %^GREEN%^of the trees close in around you, and soon they are twined so tightly together that your passage forward is nearly blocked. Small "
"openings between the branches reveal a beautiful forest %^BOLD%^glade %^RESET%^%^GREEN%^on the other side, if only you could find a way through the impenetrable wall of branches. You sense "
"this place of beauty before you is one of great power and reverence, and you must ask yourself if you belong here....  The weight of the unseen eyes upon you is %^BOLD%^palpable %^RESET%^"
"%^GREEN%^now.%^RESET%^\n");
    set_smell("default","%^BOLD%^%^GREEN%^You smell the fresh scent of wildflowers.%^RESET%^");
    set_listen("default","%^RESET%^%^CYAN%^You hear the distant trickling of a spring.%^RESET%^");

    set_exits(([
      "southwest" : "/d/dagger/road/elfglade/elfglade3",
    ]));
    set_invis_exits(({"southwest"}));

    set_items(([
      "branches" : ({"%^GREEN%^Branches close in around you on all sides, leaving you to wonder if you should go back. A single word scratched into one of them catches your eye.%^RESET%^","\n\n%^BOLD%^%^WHITE%^~ southwest ~%^BOLD%^%^WHITE%^","elven"}),
      "openings" : "%^GREEN%^The narrow openings allow you to see through to the glade on the other side, but they are few and far between. You think you might be able to squeeze through one "
"of the larger openings.%^RESET%^",
      "glade" : "%^GREEN%^The trees encircle this place of natural beauty. Tall grass and wildflowers cover the forest floor.%^RESET%^",
    ]));
}

void init() {
   ::init();
   add_action("branches_fun","squeeze");
}

int branches_fun(string str) {
   if(!str) return 0;
   if(str != "through opening" && str != "through the opening" && str != "through large opening" && str != "through the large opening") return 0;
   if(!TP->query_invis()) tell_room(ETP,"%^GREEN%^"+TP->QCN+" carefully squeezes through one of the openings between the branches.%^RESET%^",TP);
   tell_object(TP,"%^GREEN%^You find an opening big enough to permit you through, and carefully squeeze between the branches.%^RESET%^");
   TP->move_player("/d/dagger/road/elfglade/elfglade1");
   return 1;
}
